name: Espelhar branch main.

on:
  workflow_call:
    secrets:
      VR_PACKAGE_TOKEN:
        required: true
    inputs:
      BRANCH:
        required: true
        type: string

jobs:
  leave-it-up-to-date:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout do Código
        uses: actions/checkout@v3

      - name: Verificar se a branch existe
        run: |
          BRANCH=${{ inputs.BRANCH }}

          if ! git show-ref --quiet refs/heads/$BRANCH; then
            # Se a branch não existir será criada
            git swtich -c $BRANCH origin/main
          fi

      - name: Atualizar a branch
        run: |
          BRANCH=${{ inputs.BRANCH }}

          git fetch origin main
          git swtich $BRANCH
          git merge --ff-only origin/main
          git push origin BRANCH
